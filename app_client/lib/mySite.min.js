!function(e,t){if(typeof module!="undefined"&&module.exports)module.exports=t();else if(typeof define=="function"&&define.amd)define(t);else this[e]=t()}("bowser",function(){var e=true;function t(t){function o(e){var o=t.match(e);return o&&o.length>1&&o[1]||""}function i(e){var o=t.match(e);return o&&o.length>1&&o[2]||""}var n=o(/(ipod|iphone|ipad)/i).toLowerCase(),r=/like android/i.test(t),a=!r&&/android/i.test(t),l=/CrOS/.test(t),s=/silk/i.test(t),c=/sailfish/i.test(t),u=/tizen/i.test(t),m=/(web|hpw)os/i.test(t),d=/windows phone/i.test(t),f=!d&&/windows/i.test(t),g=!n&&!s&&/macintosh/i.test(t),v=!a&&!c&&!u&&!m&&/linux/i.test(t),p=o(/edge\/(\d+(\.\d+)?)/i),h=o(/version\/(\d+(\.\d+)?)/i),b=/tablet/i.test(t),y=!b&&/[^-]mobi/i.test(t),w;if(/opera|opr/i.test(t)){w={name:"Opera",opera:e,version:h||o(/(?:opera|opr)[\s\/](\d+(\.\d+)?)/i)}}else if(/yabrowser/i.test(t)){w={name:"Yandex Browser",yandexbrowser:e,version:h||o(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}}else if(d){w={name:"Windows Phone",windowsphone:e};if(p){w.msedge=e;w.version=p}else{w.msie=e;w.version=o(/iemobile\/(\d+(\.\d+)?)/i)}}else if(/msie|trident/i.test(t)){w={name:"Internet Explorer",msie:e,version:o(/(?:msie |rv:)(\d+(\.\d+)?)/i)}}else if(l){w={name:"Chrome",chromeos:e,chromeBook:e,chrome:e,version:o(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}}else if(/chrome.+? edge/i.test(t)){w={name:"Microsoft Edge",msedge:e,version:p}}else if(/chrome|crios|crmo/i.test(t)){w={name:"Chrome",chrome:e,version:o(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}}else if(n){w={name:n=="iphone"?"iPhone":n=="ipad"?"iPad":"iPod"};if(h){w.version=h}}else if(c){w={name:"Sailfish",sailfish:e,version:o(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}}else if(/seamonkey\//i.test(t)){w={name:"SeaMonkey",seamonkey:e,version:o(/seamonkey\/(\d+(\.\d+)?)/i)}}else if(/firefox|iceweasel/i.test(t)){w={name:"Firefox",firefox:e,version:o(/(?:firefox|iceweasel)[ \/](\d+(\.\d+)?)/i)};if(/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(t)){w.firefoxos=e}}else if(s){w={name:"Amazon Silk",silk:e,version:o(/silk\/(\d+(\.\d+)?)/i)}}else if(a){w={name:"Android",version:h}}else if(/phantom/i.test(t)){w={name:"PhantomJS",phantom:e,version:o(/phantomjs\/(\d+(\.\d+)?)/i)}}else if(/blackberry|\bbb\d+/i.test(t)||/rim\stablet/i.test(t)){w={name:"BlackBerry",blackberry:e,version:h||o(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}}else if(m){w={name:"WebOS",webos:e,version:h||o(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)};/touchpad\//i.test(t)&&(w.touchpad=e)}else if(/bada/i.test(t)){w={name:"Bada",bada:e,version:o(/dolfin\/(\d+(\.\d+)?)/i)}}else if(u){w={name:"Tizen",tizen:e,version:o(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||h}}else if(/safari/i.test(t)){w={name:"Safari",safari:e,version:h}}else{w={name:o(/^(.*)\/(.*) /),version:i(/^(.*)\/(.*) /)}}if(!w.msedge&&/(apple)?webkit/i.test(t)){w.name=w.name||"Webkit";w.webkit=e;if(!w.version&&h){w.version=h}}else if(!w.opera&&/gecko\//i.test(t)){w.name=w.name||"Gecko";w.gecko=e;w.version=w.version||o(/gecko\/(\d+(\.\d+)?)/i)}if(!w.msedge&&(a||w.silk)){w.android=e}else if(n){w[n]=e;w.ios=e}else if(f){w.windows=e}else if(g){w.mac=e}else if(v){w.linux=e}var k="";if(w.windowsphone){k=o(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i)}else if(n){k=o(/os (\d+([_\s]\d+)*) like mac os x/i);k=k.replace(/[_\s]/g,".")}else if(a){k=o(/android[ \/-](\d+(\.\d+)*)/i)}else if(w.webos){k=o(/(?:web|hpw)os\/(\d+(\.\d+)*)/i)}else if(w.blackberry){k=o(/rim\stablet\sos\s(\d+(\.\d+)*)/i)}else if(w.bada){k=o(/bada\/(\d+(\.\d+)*)/i)}else if(w.tizen){k=o(/tizen[\/\s](\d+(\.\d+)*)/i)}if(k){w.osversion=k}var S=k.split(".")[0];if(b||n=="ipad"||a&&(S==3||S==4&&!y)||w.silk){w.tablet=e}else if(y||n=="iphone"||n=="ipod"||a||w.blackberry||w.webos||w.bada){w.mobile=e}if(w.msedge||w.msie&&w.version>=10||w.yandexbrowser&&w.version>=15||w.chrome&&w.version>=20||w.firefox&&w.version>=20||w.safari&&w.version>=6||w.opera&&w.version>=10||w.ios&&w.osversion&&w.osversion.split(".")[0]>=6||w.blackberry&&w.version>=10.1){w.a=e}else if(w.msie&&w.version<10||w.chrome&&w.version<20||w.firefox&&w.version<20||w.safari&&w.version<6||w.opera&&w.version<10||w.ios&&w.osversion&&w.osversion.split(".")[0]<6){w.c=e}else w.x=e;return w}var o=t(typeof navigator!=="undefined"?navigator.userAgent:"");o.test=function(e){for(var t=0;t<e.length;++t){var i=e[t];if(typeof i==="string"){if(i in o){return true}}}return false};o._detect=t;return o});(function(){angular.module("mySite",["ui.bootstrap","ui.calendar","ngRoute"]).value("bowser",bowser);function e(e,t){e.when("/",{templateUrl:"/home/home.view.html",controller:"homeCtrl",controllerAs:"vm"}).when("/login",{templateUrl:"/auth/login/login.view.html",controller:"loginCtrl",controllerAs:"vm"}).when("/register",{templateUrl:"/auth/register/register.view.html",controller:"registerCtrl",controllerAs:"vm"}).otherwise({redirectTo:"/"});t.html5Mode({enabled:true,requireBase:false})}angular.module("mySite").config(["$routeProvider","$locationProvider",e])})();(function(){angular.module("mySite").service("videoManip",e);function e(){var e=function(e){var t=angular.element(document.querySelector("#"+e));t[0].pause()};var t=function(e){var t=angular.element(document.querySelector("#"+e));t[0].play()};var o=function(e){var t=angular.element(document.querySelector("#"+e));return!t[0].paused};return{pause:e,play:t,isPlaying:o}}})();(function(){angular.module("mySite").service("browserDetector",e);e.$inject=["bowser"];function e(e){var t=function(){return e.msie&&e.version<9};var o=function(){return e.msie};return{isLtIe9:t,isIe:o}}})();(function(){angular.module("mySite").service("mySiteData",e);e.$inject=["$http"];function e(e){var t=function(){return e.get("/api/blogs")};var o=function(t){return e.get("/api/blog/"+t)};var i=function(t,o){return e.post("/api/locations/"+t+"/reviews",o,{headers:{Authorization:"Bearer "+authentication.getToken()}})};return{blogs:t,blogById:o,addReviewById:i}}})();(function(){angular.module("mySite").service("authentication",e);e.$inject=["$window","$http"];function e(e,t){var o=function(t){e.localStorage["mySite-token"]=t};var i=function(){return e.localStorage["mySite-token"]};var n=function(e){return t.post("/api/register",e).success(function(e){o(e.token)})};var r=function(e){return t.post("/api/login",e).success(function(e){o(e.token)})};var a=function(){e.localStorage.removeItem("mySite-token")};var l=function(){var t=i();if(t){var o=JSON.parse(e.atob(t.split(".")[1]));return o.exp>Date.now()/1e3}else{return false}};var s=function(){if(l()){var t=i();var o=JSON.parse(e.atob(t.split(".")[1]));return{email:o.email,name:o.name}}};var c=function(e){var t=["aol.com","att.net","comcast.net","facebook.com","gmail.com","gmx.com","googlemail.com","google.com","hotmail.com","hotmail.co.uk","mac.com","me.com","mail.com","msn.com","live.com","sbcglobal.net","verizon.net","yahoo.com","yahoo.co.uk","email.com","games.com","gmx.net","hush.com","hushmail.com","icloud.com","inbox.com","lavabit.com","love.com","outlook.com","pobox.com","rocketmail.com","safe-mail.net","wow.com","ygm.com","ymail.com","zoho.com","fastmail.fm","bellsouth.net","charter.net","comcast.net","cox.net","earthlink.net","juno.com","btinternet.com","virginmedia.com","blueyonder.co.uk","freeserve.co.uk","live.co.uk","ntlworld.com","o2.co.uk","orange.net","sky.com","talktalk.co.uk","tiscali.co.uk","virgin.net","wanadoo.co.uk","bt.com","sina.com","qq.com","naver.com","hanmail.net","daum.net","nate.com","yahoo.co.jp","yahoo.co.kr","yahoo.co.id","yahoo.co.in","yahoo.com.sg","yahoo.com.ph","hotmail.fr","live.fr","laposte.net","yahoo.fr","wanadoo.fr","orange.fr","gmx.fr","sfr.fr","neuf.fr","free.fr","gmx.de","hotmail.de","live.de","online.de","t-online.de","web.de","yahoo.de","mail.ru","rambler.ru","yandex.ru","ya.ru","list.ru","hotmail.be","live.be","skynet.be","voo.be","tvcablenet.be","telenet.be","hotmail.com.ar","live.com.ar","yahoo.com.ar","fibertel.com.ar","speedy.com.ar","arnet.com.ar","hotmail.com","gmail.com","yahoo.com.mx","live.com.mx","yahoo.com","hotmail.es","live.com","hotmail.com.mx","prodigy.net.mx","msn.com"];return e.indexOf("@")>0&&e.indexOf("@")<e.length&&e.indexOf(".")>0&&e.indexOf(".")<e.length&&t.indexOf(e.split("@")[1])>-1};return{saveToken:o,getToken:i,register:n,login:r,logout:a,isLoggedIn:l,currentUser:s,isEmail:c}}})();(function(){angular.module("mySite").controller("homeCtrl",e);e.$inject=["$location","browserDetector","videoManip","mySiteData","authentication"];function e(e,t,o,i,n){var r=this;var a="I am getting nausious...";var l="Much Better.";r.pauseplayIcon="pause";r.pauseplayCap=a;r.toFantasy=function(){$window.location.href("/fan/home")};r.pageHeader={title:"Welcome to Big Al's Site!",strapline:"Where all of my dreams come true..."};r.pauseplay=function(){var e="bgvid";if(o.isPlaying(e)){o.pause(e);r.pauseplayIcon="play";r.pauseplayCap=l}else{o.play(e);r.pauseplayIcon="pause";r.pauseplayCap=a}};r.webm="/videos/deep_blue_sky.webm";r.mp4="/videos/deep_blue_sky.mp4";r.img="/images/welcome_image.jpeg";r.yahooimg="/images/yahoo.png";r.calimg="/images/calendar.png";r.blogimg="/images/blog.png";r.fbimg="/images/facebook.png";var s=function(e){r.blogData=e.data};var c=function(e){console.log(e);r.pageHeader={title:"error in api"}};i.blogs().then(s,c);r.goTo=function(t){e.path("/blog/"+t)};r.currentPath=e.path();r.isLoggedIn=n.isLoggedIn();r.currentUser=n.currentUser();r.logout=function(){n.logout();r.isLoggedIn=false;e.path("/")}}})();(function(){angular.module("mySite").controller("loginCtrl",e);e.$inject=["$location","authentication"];function e(e,t){var o=this;o.pageHeader={title:"Sign in to mySite"};o.credentials={email:"",username:"",screenname:"",password:""};o.returnPage=e.search().page||"/";o.onSubmit=function(){o.formError="";if(!o.credentials.email||!o.credentials.password){o.formError="All fields required, please try again";return false}else{o.doLogin()}};o.doLogin=function(){o.formError="";t.login(o.credentials).error(function(e){o.formError=e}).then(function(){e.search("page",null);e.path(o.returnPage)})}}})();(function(){angular.module("mySite").controller("registerCtrl",e);e.$inject=["$location","authentication"];function e(e,t){var o=this;o.pageHeader={title:"Create a new account for mySite"};o.credentials={screenname:"",username:"",email:"",password:""};o.returnPage=e.search().page||"/";o.onSubmit=function(){o.formError="";if(!t.isEmail(o.credentials.email)){o.formError="Please enter a valid email address";return false}else if(!o.credentials.screenname||!o.credentials.username||!o.credentials.email||!o.credentials.password){o.formError="All fields required, please try again";return false}else if(o.credentials.username.indexOf("@")>-1){o.formError="Please do not use the character '@' in your username";return false}else{o.doRegister()}};o.doRegister=function(){o.formError="";t.register(o.credentials).error(function(e){o.formError=e}).then(function(){e.search("page",null);e.path(o.returnPage)})}}})();(function(){angular.module("mySite").directive("pageHeader",e);function e(){return{restrict:"EA",scope:{content:"=content"},templateUrl:"/common/directives/pageHeader/pageHeader.template.html"}}})();(function(){angular.module("mySite").directive("blogList",e);function e(){return{restrict:"EA",scope:{data:"=data"},templateUrl:"/common/directives/blogList/blogList.template.html"}}})();(function(){angular.module("mySite").directive("backgroundVideo",e);function e(){return{restrict:"EA",scope:{content:"=content"},templateUrl:"/common/directives/background_video/background_video.template.html"}}})();(function(){angular.module("mySite").controller("calCtrl",e);e.$inject=["browserDetector","mySiteData"];function e(e,t){var o=this;o.pageHeader={title:"Welcome to Big Al's Calendar!",strapline:"Schedule your hearts desires"};o.clearTimes=function(){if(o.event.allDay){o.event.end=null;o.event.start=null}else{o.eventWarning=""}};var i=function(e){var t=[];e=e+"";t=e.split(" ");tz=t[5];e=t[4];t=e.split(":");t=[t[0],t[1]];e=t.join(":");tz=tz.split("GMT")[1].substr(0,3)+":00";e=e+tz;return e};o.eventSubmit=function(){var e={};o.formError="";if(!o.event.title){o.formError="Please fill out title."}if(!o.event.start&&!o.event.end){if(!o.event.allDay){o.formError="Please submit time for event."}}if(o.formError){return false}var t=o.eventDate;e.title=o.event.title;e.start=o.event.allDay?t:t+"T"+i(o.event.start);if(o.event.end&&!o.event.allDay){e.end=t+"T"+i(o.event.end)}e.allDay=o.event.allDay;o.doAddEvent(e)};o.unselect=function(){o.dateSelected=false};o.doAddEvent=function(e){o.events.push(e);if($("#lgcalendar").is(":visible")){$("#lgcalendar").fullCalendar("refetchEvents")}else{$("#smcalendar").fullCalendar("refetchEvents")}o.unselect()};o.eventTimeWarning=function(){if(o.event.allDay){o.eventWarning="Warning: if 'All Day' is selected, other times will be ignored."}};o.alertEventOnClick=function(e,t,i){o.dateSelected=true;o.eventDate=e.format()};o.dateSelected=false;o.events=[];o.eventSources={events:function(e,t,i,n){n(o.events)}};o.uiConfig={bigcalendar:{editable:true,selectable:true,header:{left:"month basicWeek agendaDay",center:"title",right:"today prev,next"},dayClick:o.alertEventOnClick,eventDrop:o.alertOnDrop,eventResize:o.alertOnResize},smallcalendar:{editable:true,selectable:true,header:{left:"prev",center:"title",right:"next"},dayClick:o.alertEventOnClick,eventDrop:o.alertOnDrop,eventResize:o.alertOnResize,defaultView:"basicDay"}};if(e.isLtIe9()){}}})();(function(){angular.module("myCalendar",["ui.bootstrap","ui.calendar","ngRoute"]).value("bowser",bowser);function e(e,t){e.when("/calendar",{templateUrl:"/app_calendar/views/home.html",controller:"calCtrl",controllerAs:"vm"}).otherwise({redirectTo:"/"});t.html5Mode({enabled:true,requireBase:false})}angular.module("myCalendar",["mySite"]).config(["$routeProvider","$locationProvider",e])})();(function(){angular.module("mySite").controller("blogCtrl",e);e.$inject=["$routeParams","mySiteData"];function e(e,t){var o=this;o.pageHeader={title:"Welcome to Big Al's Blog!",strapline:"Where you get to hear about all my dreams!"};var i=function(e){o.blogData=e.data};var n=function(e){console.log(e);o.pageHeader={title:"error in api"}};t.blogs().then(i,n);o.goTo=function(e){$location.path("/blog/"+e)}}})();(function(){angular.module("myBlog",["ui.bootstrap","ngRoute"]).value("bowser",bowser);function e(e,t){e.when("/blog",{templateUrl:"/app_blog/views/home.html",controller:"blogCtrl",controllerAs:"vm"}).otherwise({redirectTo:"/"});t.html5Mode({enabled:true,requireBase:false})}angular.module("myBlog",["mySite"]).config(["$routeProvider","$locationProvider",e])})();angular.module("bnx.module.facebook",[]).provider("facebook",facebookProvider);facebookProvider.$inject=["$injector"];function facebookProvider(e){this.initialized=false;var t={appId:"213101342444152",status:true,cookie:true,xfbml:true,version:"v2.8"};var o={auth:["authResponseChange","statusChange","login","logout"]};var i=[];this.init=function(e){window.fbAsyncInit=function(){angular.extend(t,e);FB.init(t);this.initialized=true;console.log("Facebook initialization done.");r()}};function n(e,t,o){console.log("adding to Q: ",e);i.push([e,t,o])}var r=function(){console.log("Processing Q messages.");while(item=i.shift()){console.log("Processing: "+item[0]);func=item[0];self=item[1];args=item[2];func.apply(self,args)}};this.$get=["$rootScope","$q",function(e,t){var i=function(o){console.log("Promising");var i=t.defer();o(function(t){if(t&&t.error){i.reject(t)}else{i.resolve(t)}e.$apply()});return i.promise};var r=function(){console.log("Registering Handlers");e.$broadcast("fb.init",{});angular.forEach(o,function(t,o){console.log("There are events: "+t+", "+o);angular.forEach(t,function(t){var i="fb."+o+"."+t;console.log("Subscribing: "+i);FB.Event.subscribe(o+"."+t,function(t){e.$broadcast(i,t)})})})};var a=function(e){console.log("Executing Login Call");return i(function(t){FB.login(function(e){t(e)},e)})};var l=function(){console.log("Checking Login Status");return i(function(e){FB.getLoginStatus(function(t){e(t)})})};var s=function(e){console.log("Executing Api Call");return i(function(t){FB.api(e,function(e){t(e)})})};if(!this.initialized){console.log("Not Initialized");n(r,this,[])}else{console.log("Initialized");r()}var c=this;return{initialized:function(){return c.initialized},loginStatus:l,init:c.init,api:s,login:a}}]}(function(){angular.module("mySite").controller("socialCtrl",e);e.$inject=["$routeParams","mySiteData","facebook","$scope","$window"];function e(e,t,o,n,r){var a=this;a.fbData;a.fbPic;a.fbLoggedIn=true;a.fbPhotoData="Retrieving Data...";a.login=y;a.nextPic=v;a.prevPic=p;var l=[];var s=[];var c=0;var u=0;var m;function d(e,t){var o=e;var n=1;for(i=0;i<o.length;i++){var r="";var l;var u;if(!o[i].message&&o[i].story){r=o[i].story}else{r=o[i].message}if(o[i].attachments!=null){if(o[i].attachments.data[0].subattachments!=null){var m=o[i].attachments.data[0].subattachments.data;for(n=0;n<m.length;n++){u=m[n].media.image.src;s.push({message:r,attachment:u})}}else{u=o[i].attachments.data[0].media.image.src;s.push({message:r,attachment:u})}}}a.fbPhotoData=JSON.stringify(s);if(t){c=s.length-n;console.log("LENGTH: "+s.length+"  ONDATA: "+c);a.fbData=s[c]}else{c=0;console.log("LENGTH: "+s.length+"  ONDATA: "+c);a.fbData=s[c]}}function f(){console.log("TROLLING......");var e=o.api("/1612692632367704?fields=feed{created_time,message,story,attachments}");e.then(function(e){latestGroupUpdateTime=moment(e.feed.data[0].created_time);if(m){if(m.diff(latestGroupUpdateTime)<0){var t=[];var o=0;while(m.diff(moment(e.feed.data[o].created_time))<0){t.push(e.feed.data[o]);o=o+1}d(t,true);m=latestGroupUpdateTime}else{console.log("No Updates")}}else{var t=[];for(i=e.feed.data.length-1;i>=0;i--){t.push(e.feed.data[i])}d(t,false);m=latestGroupUpdateTime}setTimeout(f,6e4)},function(e){alert("FAILED: "+JSON.stringify(e))})}function g(e){var t;var o=document.getElementById("imgDiv").clientWidth-40;for(t=0;t<e.length;t++){console.log("width: "+e[t].width+" Page W: "+o);if(e[t].width>o){continue}else{return e[t]}}return e[t]}function v(){u=u+1;c=c+1;if(s.length<=c){c=0}a.fbData=s[c]}function p(){u=u-1;c=c-1;if(c<0){c=s.length-1}a.fbData=s[c]}function h(e){var t=o.api("/"+e[u].id+"?fields=images");t.then(function(e){a.fbPic=g(e.images)},function(e){alert("FAILED: "+JSON.stringify(e))})}function b(){var e=o.api("/me/photos");e.then(function(e){l=e.data;h(l)},function(e){alert("FAILED: "+JSON.stringify(e))})}function y(){var e=o.login({scope:"public_profile,user_friends,email"});e.then(function(e){b()},function(e){alert("FAILED: "+JSON.stringify(e))})}n.$on("fb.init",function(e,t){console.log("Event: "+JSON.stringify(t));var i=o.loginStatus();i.then(function(e){if(e.status==="connected"){a.fbLoggedIn=true;f()}else{a.fbLoggedIn=false}},function(e){alert("FAILED: "+JSON.stringify(e))})});n.$on("fb.auth.login",function(e,t){a.fbLoggedIn=true});a.pageHeader={title:"Welcome to Big Al's Social!",strapline:"Where you get to see social media streams!"}}})();(function(){angular.module("mySocialStream",["bnx.module.facebook","ui.bootstrap","ngRoute","ngTouch"]).value("bowser",bowser);function e(e,t){e.when("/social",{templateUrl:"/app_social_stream/views/home.html",controller:"socialCtrl",controllerAs:"vm"}).otherwise({redirectTo:"/"});t.html5Mode({enabled:true,requireBase:false})}angular.module("mySocialStream",["mySite","bnx.module.facebook","ngTouch"]).config(["$routeProvider","$locationProvider","facebookProvider",e])})();(function(){angular.module("bnx.module.facebook").directive("facebookLogin",e);function e(){return{restrict:"E",scope:{content:"=content",autoLogout:"@",size:"@",showFaces:"@",scope:"@"},templateUrl:"/app_social_stream/directives/facebookLogin.template.html"}}})();(function(){angular.module("bnx.module.facebook").directive("facebook",e);e.$inject=["$location","facebook"];function e(e,t){var o=document.createElement("script");o.src="//connect.facebook.net/en_US/sdk.js'";o.id="facebook-jssdk";o.async=true;return{restrict:"EA",templateUrl:"/app_social_stream/directives/facebook.template.html",scope:{content:"=content",appId:"@",parameters:"="},link:function(e,i,n){if(!t.initialized()){document.body.appendChild(o);var r=e.parameters||{};angular.extend(r,{appId:e.appId});t.init(r)}}}}})();